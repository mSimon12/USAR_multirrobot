<?xml version="1.0"?>
<launch>
  <arg name="robot_name" default="robot"/>
  <arg name="model" default="model_depth_camera"/>
  <arg name="xcoordinate" default="0.0"/>
  <arg name="ycoordinate" default="0.0"/>
  <arg name="zcoordinate" default="0.0"/>
  <arg name="roll" default="0.0"/>
  <arg name="pitch" default="0.0"/>
  <arg name="yaw" default="0.0"/>

  <!-- Make robot_description and run robot_state_publisher --> 
  <include file="$(find pioneer3at_description)/launch/make_robot_description_and_call_state_publisher_pioneer3at.launch">
    <arg name="robot_name"  value="$(arg robot_name)"/>
    <arg name="model" value="$(arg model)"/>
    <arg name="xcoordinate" value="$(arg xcoordinate)"/>
    <arg name="ycoordinate" value="$(arg ycoordinate)"/>
    <arg name="zcoordinate" value="$(arg zcoordinate)"/>
    <arg name="roll" value="$(arg roll)"/>
    <arg name="pitch" value="$(arg pitch)"/>
    <arg name="yaw" value="$(arg yaw)"/>
  </include> 

  <!-- Navigation (move_base) --> 
  <include file="$(find pioneer3at_navigation)/launch/move_base.launch">
    <arg name="robot_name" default="$(arg robot_name)"/>
  </include>

  <!-- LAUNCH MAPPING -->
  <include file="$(find pioneer3at_slam)/launch/rtab_slam.launch">	<!-- rtab_slam, hector_slam, octomap_mapping, mapping -->
    <arg name="robot_name"    value="$(arg robot_name)"/>
    <arg name="localization"  value="true"/>
    <arg name="rtabmapviz"    value="false"/>
  </include>   

  <!-- Launch the node responsible for controlling manouvers -->
  <param name="robot_name" value= "$(arg robot_name)"/>
  <node pkg="pioneer3at_controllers" type="pioneer3at_system.py" name="manouvers_control" output="screen"/>

  <!-- Launch victym recognition system -->
  <include file="$(find pioneer3at_controllers)/launch/victim_recognition_system.launch">
    <arg name="robot_name" value="$(arg robot_name)"/>
    <arg name="sensor_range" value="2.0"/>
    <arg name="sensor_update_period" value="0.5"/>
  </include>

  <!-- Launch gas sensor -->
  <include file="$(find pioneer3at_controllers)/launch/gas_sensor.launch">
    <arg name="robot_name" value="$(arg robot_name)"/>
    <arg name="sensor_range" value="4.0"/>
    <arg name="sensor_update_period" value="1.0"/>
  </include>

</launch>
